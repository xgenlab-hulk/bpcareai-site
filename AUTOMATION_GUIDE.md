# å¤š Topic è‡ªåŠ¨åŒ–å†…å®¹ç”Ÿæˆç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
3. [æœ¬åœ°æµ‹è¯•](#æœ¬åœ°æµ‹è¯•)
4. [GitHub Actions è®¾ç½®](#github-actions-è®¾ç½®)
5. [å·¥ä½œæµç¨‹](#å·¥ä½œæµç¨‹)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ç³»ç»Ÿæ¦‚è¿°

### æ ¸å¿ƒåŠŸèƒ½

1. **å¤š Topic ç®¡ç†**
   - æ”¯æŒå¤šä¸ªæ ¸å¿ƒä¸»é¢˜ï¼ˆå¦‚ "blood pressure", "heart health", "diabetes" ç­‰ï¼‰
   - è·¨æ‰€æœ‰ topics æ–‡ä»¶ç»Ÿè®¡æ€»æ ‡é¢˜æ•°
   - æ™ºèƒ½è¡¥å……ç­–ç•¥

2. **è‡ªåŠ¨è¡¥å……é€»è¾‘**
   - å½“æ€»æ ‡é¢˜æ•° < 30 æ—¶è‡ªåŠ¨è§¦å‘è¡¥å……
   - éšæœºé€‰æ‹© 3 ä¸ª topics è¿›è¡Œè¡¥å……
   - **å¾ªç¯ç”Ÿæˆç›´åˆ°è¾¾åˆ° 100 ä¸ªæœ‰æ•ˆæ ‡é¢˜**ï¼ˆæŸ¥é‡åï¼‰
   - è‡ªåŠ¨å»é‡ï¼Œé¿å…è¯­ä¹‰é‡å¤

3. **é˜¶æ®µåŒ–ç”Ÿæˆ**
   - Days 1-20: 15 articles/day
   - Days 21-40: 20 articles/day
   - Days 41+: 30 articles/day (ongoing, unlimited)

4. **å®Œå…¨äº‘ç«¯æ‰§è¡Œ**
   - GitHub Actions æ¯å¤©è‡ªåŠ¨è¿è¡Œ
   - æœ¬åœ°ç”µè„‘å…³æœºä¹Ÿä¸å½±å“
   - è‡ªåŠ¨éƒ¨ç½²åˆ° Vercel

---

## é…ç½®è¯´æ˜

### 1. `automation-config.json` é…ç½®æ–‡ä»¶

ä½äºé¡¹ç›®æ ¹ç›®å½•ï¼Œæ§åˆ¶æ•´ä¸ªè‡ªåŠ¨åŒ–ç³»ç»Ÿçš„è¡Œä¸ºã€‚

```json
{
  "projectStartDate": "2025-11-27",  // é¡¹ç›®å¼€å§‹æ—¥æœŸ
  "stages": [
    {
      "dayRange": [1, 20],
      "articlesPerDay": 15,
      "description": "Initial growth phase"
    },
    {
      "dayRange": [21, 40],
      "articlesPerDay": 20,
      "description": "Acceleration phase"
    },
    {
      "dayRange": [41, 9999],
      "articlesPerDay": 30,
      "description": "Mature phase - ONGOING UNLIMITED"
    }
  ],
  "topicManagement": {
    "topics": [
      "blood pressure",
      "heart health",
      "diabetes",
      "cholesterol",
      "heart disease",
      "cardiovascular health"
    ],
    "totalMinThreshold": 30,        // æ€»æ ‡é¢˜æ•°é˜ˆå€¼
    "targetReplenishAmount": 100,   // æ¯æ¬¡è¡¥å……ç›®æ ‡
    "topicsPerReplenish": 3,        // æ¯æ¬¡éšæœºé€‰æ‹©çš„ topics æ•°é‡
    "replenishConfig": {
      "maxAttempts": 10,            // æœ€å¤§å°è¯•æ¬¡æ•°
      "duplicateThreshold": 0.85,   // è¯­ä¹‰æŸ¥é‡é˜ˆå€¼
      "expectedPassRate": 0.7,      // é¢„æœŸé€šè¿‡ç‡
      "delayBetweenAttempts": 300   // å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
    }
  }
}
```

### 2. ä¿®æ”¹é…ç½®çš„æ–¹æ³•

#### æ·»åŠ æ–°çš„ Topic

åœ¨ `topicManagement.topics` æ•°ç»„ä¸­æ·»åŠ ï¼š

```json
"topics": [
  "blood pressure",
  "heart health",
  "diabetes",
  "cholesterol",
  "heart disease",
  "cardiovascular health",
  "sleep disorders",  // æ–°å¢
  "nutrition"         // æ–°å¢
]
```

#### è°ƒæ•´è¡¥å……ç­–ç•¥

```json
"totalMinThreshold": 50,        // æ”¹ä¸º 50ï¼ˆæ›´ä¿å®ˆï¼‰
"targetReplenishAmount": 150,   // æ¯æ¬¡è¡¥å…… 150 ä¸ª
"topicsPerReplenish": 5         // éšæœºé€‰æ‹© 5 ä¸ª topics
```

#### è°ƒæ•´æ¯æ—¥æ–‡ç« æ•°é‡

ä¿®æ”¹ `stages` é…ç½®ï¼š

```json
{
  "dayRange": [1, 30],
  "articlesPerDay": 20,
  "description": "Faster initial growth"
}
```

---

## æœ¬åœ°æµ‹è¯•

### 1. å‰ç½®æ¡ä»¶

ç¡®ä¿å·²å®‰è£…ä¾èµ–ï¼š

```bash
npm install
```

ç¡®ä¿ `.env` æ–‡ä»¶åŒ…å« API keyï¼š

```env
QWEN_API_KEY=your_qwen_api_key_here
```

### 2. æµ‹è¯•è‡ªåŠ¨åŒ–è„šæœ¬

è¿è¡Œå®Œæ•´çš„è‡ªåŠ¨åŒ–æµç¨‹ï¼š

```bash
npm run auto:generate
```

è¿™å°†æ‰§è¡Œï¼š
1. âœ… åŠ è½½é…ç½®
2. âœ… è®¡ç®—å¤©æ•°ï¼ˆåŸºäº `projectStartDate`ï¼‰
3. âœ… æ£€æŸ¥ topic åº“å­˜
4. âœ… è¡¥å…… topicsï¼ˆå¦‚æœéœ€è¦ï¼‰
5. âœ… ç”Ÿæˆæ–‡ç« ï¼ˆä»å¤šä¸ª topics éšæœºé€‰æ‹©ï¼‰
6. âœ… é‡å»ºæ–‡ç« ç´¢å¼•

### 3. æ‰‹åŠ¨æµ‹è¯•å„ä¸ªç»„ä»¶

#### æµ‹è¯• Topic ç”Ÿæˆï¼ˆå•ä¸ªä¸»é¢˜ï¼‰

```bash
npm run generate:topics -- "heart health" 50
```

#### æµ‹è¯•æ–‡ç« ç”Ÿæˆ

```bash
npm run generate:articles -- "blood pressure" 5
```

#### é‡å»ºç´¢å¼•

```bash
npm run build:articles-index
```

---

## GitHub Actions è®¾ç½®

### 1. é…ç½® Secrets

åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­æ·»åŠ ä»¥ä¸‹ Secretsï¼š

1. **QWEN_API_KEY**
   - Qwen API å¯†é’¥
   - ç”¨äºè°ƒç”¨æ–‡ç« ç”Ÿæˆå’Œ embedding API

2. **VERCEL_TOKEN**
   - Vercel éƒ¨ç½²ä»¤ç‰Œ
   - åœ¨ Vercel è´¦æˆ·è®¾ç½®ä¸­ç”Ÿæˆ

3. **VERCEL_ORG_ID**
   - Vercel ç»„ç»‡ ID
   - å¯ä»¥åœ¨é¡¹ç›®è®¾ç½®ä¸­æ‰¾åˆ°

4. **VERCEL_PROJECT_ID**
   - Vercel é¡¹ç›® ID
   - å¯ä»¥åœ¨é¡¹ç›®è®¾ç½®ä¸­æ‰¾åˆ°

### 2. å·¥ä½œæµæ–‡ä»¶

å·²è‡ªåŠ¨åˆ›å»ºåœ¨ `.github/workflows/daily-article-generation.yml`

**æ‰§è¡Œæ—¶é—´**ï¼š
- æ¯å¤©åŒ—äº¬æ—¶é—´ 10:00 (UTC 02:00)
- ä¹Ÿå¯ä»¥æ‰‹åŠ¨è§¦å‘

**æ‰§è¡Œæ­¥éª¤**ï¼š
1. Checkout ä»£ç 
2. å®‰è£… Node.js å’Œä¾èµ–
3. è¿è¡Œ `npm run auto:generate`
4. é‡å»ºæ–‡ç« ç´¢å¼•
5. æ„å»º Next.js ç«™ç‚¹
6. éƒ¨ç½²åˆ° Vercel
7. æäº¤æ›´æ”¹åˆ° GitHub
8. ç”Ÿæˆæ¯æ—¥æŠ¥å‘Š

### 3. æ‰‹åŠ¨è§¦å‘å·¥ä½œæµ

åœ¨ GitHub ä»“åº“é¡µé¢ï¼š
1. ç‚¹å‡» "Actions" æ ‡ç­¾
2. é€‰æ‹© "Daily Article Generation & Deployment"
3. ç‚¹å‡» "Run workflow"
4. é€‰æ‹©åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ mainï¼‰
5. ç‚¹å‡» "Run workflow" ç¡®è®¤

---

## å·¥ä½œæµç¨‹

### å®Œæ•´è‡ªåŠ¨åŒ–æµç¨‹ï¼ˆæ¯æ—¥ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: Check Topic Inventory                          â”‚
â”‚  - ç»Ÿè®¡æ‰€æœ‰ topics æ–‡ä»¶çš„æ€»æ ‡é¢˜æ•°                         â”‚
â”‚  - å¦‚æœ < 30ï¼Œè¿›å…¥è¡¥å……æµç¨‹                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: Replenish Topics (if needed)                   â”‚
â”‚  - éšæœºé€‰æ‹© 3 ä¸ª topics                                  â”‚
â”‚  - ä¸ºæ¯ä¸ª topic åˆ†é…ç›®æ ‡æ•°é‡ï¼ˆå¦‚ 34, 33, 33ï¼‰              â”‚
â”‚  - å¾ªç¯ç”Ÿæˆç›´åˆ°æ¯ä¸ª topic è¾¾åˆ°ç›®æ ‡                         â”‚
â”‚  - è¯­ä¹‰æŸ¥é‡ï¼Œç¡®ä¿é«˜è´¨é‡                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: Generate Articles                              â”‚
â”‚  - ä»æ‰€æœ‰ topics éšæœºé€‰æ‹©æ ‡é¢˜                             â”‚
â”‚  - ç¡®ä¿å¤šæ ·æ€§ï¼ˆæ··åˆå¤šä¸ªä¸»é¢˜ï¼‰                             â”‚
â”‚  - ç”Ÿæˆ 15/20/30 ç¯‡ï¼ˆæ ¹æ®å¤©æ•°ï¼‰                           â”‚
â”‚  - è‡ªåŠ¨ä¿å­˜ embeddings                                   â”‚
â”‚  - è‡ªåŠ¨æŸ¥æ‰¾ç›¸å…³æ–‡ç«                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: Update & Deploy                                â”‚
â”‚  - é‡å»ºæ–‡ç« ç´¢å¼•                                          â”‚
â”‚  - æ„å»º Next.js ç«™ç‚¹                                     â”‚
â”‚  - éƒ¨ç½²åˆ° Vercel                                         â”‚
â”‚  - æäº¤æ›´æ”¹åˆ° GitHub                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¡¥å……é€»è¾‘è¯¦è§£

å½“æ€»æ ‡é¢˜æ•° < 30 æ—¶ï¼š

```
å‡è®¾å½“å‰åº“å­˜ï¼š
  - blood pressure: 8 topics
  - heart health: 5 topics
  - diabetes: 7 topics
  - cholesterol: 4 topics
  - heart disease: 3 topics
  - cardiovascular health: 2 topics
  æ€»è®¡: 29 topics (< 30 è§¦å‘è¡¥å……)

éšæœºé€‰æ‹© 3 ä¸ª topics:
  â†’ heart health, diabetes, cholesterol

åˆ†é…ç›®æ ‡ï¼ˆæ€»è®¡ 100 ä¸ªï¼‰:
  - heart health: 34 ä¸ª
  - diabetes: 33 ä¸ª
  - cholesterol: 33 ä¸ª

æ‰§è¡Œè¡¥å……:
  å¯¹æ¯ä¸ª topic å¾ªç¯ç”Ÿæˆï¼š
    Round 1: ç”Ÿæˆ 49 ä¸ªå€™é€‰ â†’ 28 ä¸ªé€šè¿‡æŸ¥é‡
    Round 2: ç”Ÿæˆ 9 ä¸ªå€™é€‰ â†’ 6 ä¸ªé€šè¿‡æŸ¥é‡
    âœ… è¾¾åˆ°ç›®æ ‡ 34 ä¸ª

æœ€ç»ˆåº“å­˜ï¼š
  - blood pressure: 8 topics
  - heart health: 39 topics  (+34)
  - diabetes: 40 topics      (+33)
  - cholesterol: 37 topics   (+33)
  - heart disease: 3 topics
  - cardiovascular health: 2 topics
  æ€»è®¡: 129 topics
```

---

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•ä¿®æ”¹æ¯æ—¥ç”Ÿæˆçš„æ–‡ç« æ•°é‡ï¼Ÿ

ä¿®æ”¹ `automation-config.json` ä¸­çš„ `stages` é…ç½®ã€‚

### Q2: å¦‚ä½•æ·»åŠ æ–°çš„ topicï¼Ÿ

åœ¨ `automation-config.json` çš„ `topicManagement.topics` æ•°ç»„ä¸­æ·»åŠ æ–°ä¸»é¢˜ã€‚

### Q3: è¡¥å……é€»è¾‘ä¸ºä»€ä¹ˆè¦å¾ªç¯ç”Ÿæˆï¼Ÿ

å› ä¸º LLM ç”Ÿæˆçš„å€™é€‰æ ‡é¢˜éœ€è¦ç»è¿‡è¯­ä¹‰æŸ¥é‡ï¼Œé€šè¿‡ç‡å¯èƒ½åªæœ‰ 60%-80%ã€‚
ä¾‹å¦‚ï¼šç”Ÿæˆ 100 ä¸ªå€™é€‰ï¼ŒæŸ¥é‡åå¯èƒ½åªå‰© 70 ä¸ªã€‚
å¾ªç¯ç”Ÿæˆç¡®ä¿æœ€ç»ˆè¾¾åˆ° 100 ä¸ª**æœ‰æ•ˆ**æ ‡é¢˜ã€‚

### Q4: å¦‚ä½•æš‚åœè‡ªåŠ¨åŒ–ï¼Ÿ

ä¸¤ç§æ–¹æ³•ï¼š
1. åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­ç¦ç”¨ Actions
2. åˆ é™¤æˆ–é‡å‘½å `.github/workflows/daily-article-generation.yml`

### Q5: å¦‚ä½•æŸ¥çœ‹æ¯æ—¥æ‰§è¡Œç»“æœï¼Ÿ

åœ¨ GitHub ä»“åº“é¡µé¢ï¼š
1. ç‚¹å‡» "Actions" æ ‡ç­¾
2. æŸ¥çœ‹æœ€è¿‘çš„ workflow runs
3. ç‚¹å‡»å…·ä½“çš„ run æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### Q6: æœ¬åœ°æµ‹è¯•ä¼šå½±å“ç”Ÿäº§ç¯å¢ƒå—ï¼Ÿ

ä¼šã€‚å› ä¸ºæœ¬åœ°è¿è¡Œä¹Ÿä¼šä¿®æ”¹ `data/` ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚
å»ºè®®åœ¨æµ‹è¯•åˆ†æ”¯ä¸Šè¿›è¡Œæœ¬åœ°æµ‹è¯•ï¼Œæˆ–è€…ä½¿ç”¨ä¸åŒçš„é…ç½®æ–‡ä»¶ã€‚

### Q7: å¦‚ä½•è°ƒæ•´æŸ¥é‡é˜ˆå€¼ï¼Ÿ

ä¿®æ”¹ `automation-config.json` ä¸­çš„ï¼š

```json
"replenishConfig": {
  "duplicateThreshold": 0.85  // é™ä½åˆ° 0.80 ä¼šæ›´ä¸¥æ ¼
}
```

### Q8: GitHub Actions å…è´¹é¢åº¦å¤Ÿç”¨å—ï¼Ÿ

**æ˜¯çš„**ã€‚å…è´¹ç”¨æˆ·æ¯æœˆæœ‰ 2000 åˆ†é’Ÿã€‚
é¢„è®¡æ¯å¤©æ‰§è¡Œ 30 åˆ†é’Ÿï¼Œæœˆåº¦ä½¿ç”¨çº¦ 900 åˆ†é’Ÿï¼ˆ45% åˆ©ç”¨ç‡ï¼‰ã€‚

### Q9: å¦‚ä½•æŸ¥çœ‹å½“å‰åº“å­˜ï¼Ÿ

è¿è¡Œï¼š

```bash
node -e "
const fs = require('fs');
const topics = ['blood pressure', 'heart health', 'diabetes', 'cholesterol', 'heart disease', 'cardiovascular health'];
topics.forEach(t => {
  const slug = t.toLowerCase().replace(/\\s+/g, '-');
  const path = \`data/planned-topics-\${slug}.json\`;
  if (fs.existsSync(path)) {
    const data = JSON.parse(fs.readFileSync(path, 'utf8'));
    console.log(\`\${t}: \${data.length}\`);
  } else {
    console.log(\`\${t}: 0 (file not found)\`);
  }
});
"
```

### Q10: å¦‚ä½•æ‰‹åŠ¨è¡¥å……æŸä¸ª topicï¼Ÿ

```bash
npm run generate:topics -- "heart health" 50
```

---

## æ–‡ä»¶ç»“æ„

```
.
â”œâ”€â”€ automation-config.json           # è‡ªåŠ¨åŒ–é…ç½®
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ daily-article-generation.yml  # GitHub Actions å·¥ä½œæµ
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ auto-generate-daily.ts       # ä¸»è‡ªåŠ¨åŒ–è„šæœ¬
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ topics/
â”‚   â”‚   â”œâ”€â”€ manager.ts               # Topic åº“å­˜ç®¡ç†
â”‚   â”‚   â””â”€â”€ replenish.ts             # å¾ªç¯è¡¥å……é€»è¾‘
â”‚   â”œâ”€â”€ llm/
â”‚   â”‚   â”œâ”€â”€ qwen-topics.ts           # Topic ç”Ÿæˆ
â”‚   â”‚   â””â”€â”€ qwen-articles.ts         # æ–‡ç« ç”Ÿæˆ
â”‚   â””â”€â”€ embeddings/
â”‚       â”œâ”€â”€ similarity.ts            # è¯­ä¹‰æŸ¥é‡
â”‚       â””â”€â”€ incremental.ts           # å¢é‡ embedding
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ planned-topics-blood-pressure.json
â”‚   â”œâ”€â”€ planned-topics-heart-health.json
â”‚   â””â”€â”€ ...                          # å…¶ä»– topics æ–‡ä»¶
â””â”€â”€ content/
    â””â”€â”€ articles/                    # ç”Ÿæˆçš„æ–‡ç« 
```

---

## æ”¯æŒä¸åé¦ˆ

å¦‚æœé‡åˆ°é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œè¯·ï¼š

1. æ£€æŸ¥ GitHub Actions æ—¥å¿—
2. æŸ¥çœ‹æœ¬åœ°æ‰§è¡Œè¾“å‡º
3. éªŒè¯é…ç½®æ–‡ä»¶æ ¼å¼
4. ç¡®è®¤ API keys å’Œ Secrets è®¾ç½®æ­£ç¡®

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
